<!--Live Events Tab View-->
<div class="content-block">
  <div ng-hide="getEventGroupCount() == 0" class="content-block-header">
    <span style="padding-left: 15px;font-weight: 600;font-size: 15px;" ng-hide="selectedEventGroup() == null || selectedEventGroup() == ''">{{selectedEventGroup().name}} <span class="muted" style="font-size: 12px;">({{selectedEventGroup().id}})</span></span>
    <div class="text-dropdown" uib-dropdown uib-dropdown-toggle>
      <span class="noselect pointer">{{'LIVE_EVENTS.EVENT_GROUPS' | translate}}</span>
      <div class="fb-arrow down"></div>
      <ul class="dropdown-menu" uib-dropdown-menu>
        <li ng-repeat="eventGroup in getAllEventGroups()">
          <a href ng-click="switchToBoard(boardName)">{{eventGroup.name}} <span class="muted">({{eventGroup.id}})</span></a>
        </li>
        <li ng-hide="getEventGroupCount() == 0" role="separator" class="divider"></li>
        <li ng-hide="getEventGroupCount() == 0" ><a href="#">Add New Event</a></li>
        <li ng-hide="getEventGroupCount() == 0" role="separator" class="divider"></li>
        <li><a href ng-click="showAddBoardModal()">{{'LIVE_EVENTS.CHANGE_EVENT_GROUP.ADD_NEW_EVENT_GROUP' | translate }}</a></li>
        <li ng-hide="selectedEventGroup() == null"><a href ng-click="showDeleteBoardModal()">{{'LIVE_EVENTS.CHANGE_EVENT_GROUP.DELETE_EVENT_GROUP' | translate }}</a></li>
      </ul>
    </div>
  </div>
  <div class="content-block-body">
    <button ng-show="getEventGroupCount() == 0" ng-click="showAddBoardModal()" class="btn btn-default">+ {{'LIVE_EVENTS.ADD_FIRST_BOARD' | translate }}</button>
    <p ng-show="selectedEventGroup() == null && getEventGroupCount() > 0" class="muted" style="margin-top:15px;">{{'LIVE_EVENTS.COULD_NOT_AUTOSELECT' | translate }}</p>
    
    <div class="page-content" >
      <div class="row interactive-board-container" ng-if="selectedEventGroup() != null && getEventGroupCount() > 0">
        <div class="scene-tools-wrapper">
          <span class="scenes-title">{{'LIVE_EVENTS.EVENTS' | translate }}</span>
          <div class="scene-tools">
            <div class="btn-group" style="margin-right: 15px">
              <label class="btn btn-default" ng-model="eventsViewMode" uib-btn-radio="'grid'" ng-click="saveCurrentEventsViewMode('grid', 'liveEvents')" uib-tooltip="Events View: Grid" tooltip-append-to-body="true"><i class="fas fa-th"></i></label>
              <label class="btn btn-default" ng-model="eventsViewMode" uib-btn-radio="'list'" ng-click="saveCurrentEventsViewMode('list', 'liveEvents')" uib-tooltip="Events View: List" tooltip-append-to-body="true"><i class="fas fa-list"></i></label>
            </div>
            <div class="searchbar-wrapper">
              <input type="text" class="form-control" placeholder="Search events" ng-model="buttonSearch" style="padding-left: 27px;">
              <span class="searchbar-icon"><i class="far fa-search"></i></span>
            </div>
          </div>
        </div>
        <div class="events-content">
          <div class="tab-pane interactive-button-holder active">

            <!--Grid View-->
            <div ng-show="eventsViewMode == 'grid'" ng-class="{'interactive-control-tile': event, 'inactive-control' : !event.active && event.active != null}" ng-repeat="event in selectedEventGroup().events | filter:buttonSearch">
              <a class="control-edit-btn clickable" ng-click="showEditControlEffectsModal(event)">{{'LIVE_EVENTS.EDIT' | translate}}</a>
              <div class="button-name noselect">{{event.name}}</div>
              <div class="event-type">{{event.type}}</div>
              <span class="play-button clickable" ng-click="fireEventManually(event.id)"><i class="fas fa-play-circle"></i></span>
            </div>

            <!--List View-->
            <!--
            <table ng-show="eventsViewMode == 'list'" class="table table-hover">
              <thead style="text-transform: uppercase;color: #4a4a4a;">
                <tr>
                  <th style="width:5%;"></th>
                  <th style="width:25%;">{{'LIVE_EVENTS.ID' | translate }}</th>
                  <th style="width:25%;">{{'LIVE_EVENTS.NAME' | translate }}</th>
                  <th style="width:25%;">{{'LIVE_EVENTS.COST' | translate }}</th>
                  <th style="width:20%;"></th>
                </tr>
              </thead>
              <tbody style="font-size: 16px;">
                <tr ng-class="{'control-list': control, 'inactive-control' : !control.active && control.active != null}" ng-repeat="control in getAllControlsForScene(scene) | filter:buttonSearch">
                  <td>
                    <a ng-hide="control.kind ==='joystick' || control.kind ==='label'" ng-click="fireControlManually(control.controlId)"><i class="fas fa-play-circle clickable"></i></a>
                    <a ng-show="control.kind ==='joystick'"><img height="18" src="../images/joystick-black.svg"></img></a>
                    <a ng-show="control.kind ==='label'"><span style="color:black;"><i class="fas fa-tag"></i></span></a>
                  </td>
                  <td>{{control.kind ==='joystick' ? control.controlID : control.controlId}}</td>
                  <td ng-class="{'muted': !control.text}">
                    <span ng-hide="control.kind ==='joystick' || control.kind ==='textbox'">{{control.text ? control.text : "Unnamed"}}</span>
                    <span ng-show="control.kind ==='joystick' || control.kind ==='textbox'">n/a</span>
                  </td>
                  <td>
                    <span ng-hide="control.kind ==='joystick' || control.kind ==='label'"><i class="fa fa-bolt button-title-spark" aria-hidden="true"></i> {{control.cost ? control.cost : 0}}</span>
                    <span ng-show="control.kind ==='joystick' || control.kind ==='label'"><i class="fa fa-bolt button-title-spark" aria-hidden="true"></i> n/a </span>
                  </td>
                  <td>
                    <a ng-hide="control.kind ==='joystick' || control.kind ==='label'" class="clickable" ng-click="showEditControlEffectsModal(control)"><i class="fas fa-pencil" style="font-size: 11px"></i> Edit</a>
                  </td>
                </tr>
              </tbody>
            </table>
            -->
          </div>
        </div> <!-- End events content -->
      </div>
    </div>
  </div>
</div>


<!-- Modal For Adding/Editting Events -->
<script type="text/ng-template" id="addEditEventModal.html">
  <div class="modal-header">
    <button type="button" class="close" aria-label="Close" ng-click="dismiss()"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="editEventLabel">{{isNewEvent ? "Add Event" : "Edit Event"}}</h4>
  </div>
  <div class="modal-body">
    <div class="general-event-settings">
      <div class="settings-title">
        <h3>General Settings</h3>
      </div>

      <div class="effect-setting-container setting-padtop">
        <div class="input-group settings-eventid">
          <span class="input-group-addon" id="basic-addon3">Event Name</span>
          <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-not-empty event-id" aria-describedby="basic-addon3" ng-model="event.eventName">
        </div>
      </div>

      <div class="controls-fb-inline effect-setting-container setting-padtop">
          <label class="control-fb control--checkbox">Active Event
              <input type="checkbox" ng-model="event.active" aria-label="..." checked>
              <div class="control__indicator"></div>
          </label>
          <label class="control-fb control--checkbox">Show In Chat Feed <tooltip text="'Whether or not you want to see an alert in the chat feed when this event happens.'"></tooltip>
              <input type="checkbox" ng-model="event.chatFeedAlert" aria-label="...">
              <div class="control__indicator"></div>
          </label>
          <label class="control-fb control--checkbox">Skip Logging
              <input type="checkbox" ng-model="event.skipLog" aria-label="...">
              <div class="control__indicator"></div>
          </label>
      </div>

      <div class="effect-setting-container setting-padtop">
        <div class="effect-specific-title"><h4>Trigger On</h4></div>
        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="event-type">{{selectedEventTypeName}}</span> <span class="caret"></span>
            </button>
            <ul class="dropdown-menu event-dropdown">
                <li ng-repeat="eventType in eventDefinitions"
                    ng-click="eventTypeSelected(eventType)">
                    <a href>{{eventType.name}}</a>
                </li>
            </ul>
        </div>
      </div>

    </div>
    <div ng-if="event.eventType != null" class="effect-setting-container setting-padtop">
      <effect-list header="What should this event do?" effects="event.effects" trigger="event" update="effectListUpdated(effects)" modalId="{{modalId}}"></effect-list>      
    </div>
    <div class="modal-footer">
      <button ng-if="!isNewEvent" type="button" class="btn btn-danger delete-event-button pull-left" ng-click="saveChanges(true)">Delete Event</button>
      <button type="button" class="btn btn-link" ng-click="dismiss()">Cancel</button>
      <button type="button" class="btn btn-primary event-edit-save" ng-click="saveChanges(false)">{{isNewEvent ? "Add Event" : "Save Changes"}}</button>
    </div>
</script>